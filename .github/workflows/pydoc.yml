name: PyDoc

on:
  push:
    branches: [main]

jobs:
  generate-pydoc:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Setup Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.12'
    
    - name: Create HTML documentation with pydoc
      run: |
        mkdir -p docs
        # Generate HTML for all Python modules
        python -m pydoc -w ./*.py 2>/dev/null || true
        python -m pydoc -w ./**/*.py 2>/dev/null || true
        
        # Move generated HTML files to docs directory
        mv *.html docs/ 2>/dev/null || true
        find . -name "*.html" -type f -exec mv {} docs/ 2>/dev/null \;
    
    - name: Upload documentation
      uses: actions/upload-artifact@v4
      with:
        name: pydoc-docs
        path: docs/
